!function($){function t(t,e,n){var r=t.children(),i=!1;t.empty();for(var d=0,a=r.length;a>d;d++){var l=r.eq(d);if(t.append(l),n&&t.append(n),o(t,e)){l.remove(),i=!0;break}n&&n.remove()}return i}function e(t,r,i,d,a){var l=t.contents(),u=!1;t.empty();for(var f="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style",c=0,s=l.length;s>c&&!u;c++){var p=l[c],h=$(p);"undefined"!=typeof p&&(t.append(h),a&&t[t.is(f)?"after":"append"](a),3==p.nodeType?o(i,d)&&(u=n(h,r,i,d,a)):u=e(h,r,i,d,a),u||a&&a.remove())}return u}function n(t,e,i,l,u){var f=!1,c=t[0];if("undefined"==typeof c)return!1;for(var s="letter"==l.wrap?"":" ",p=a(c).split(s),h=-1,g=-1,v=0,w=p.length-1;w>=v;){var y=Math.floor((v+w)/2);if(y==g)break;g=y,d(c,p.slice(0,g+1).join(s)+l.ellipsis),o(i,l)?w=g:(h=g,v=g)}if(-1==h||1==p.length&&0==p[0].length){var m=t.parent();t.remove();var b=u?u.length:0;if(m.contents().size()>b){var x=m.contents().eq(-1-b);f=n(x,e,i,l,u)}else{var T=m.prev(),c=T.contents().eq(-1)[0];if("undefined"!=typeof c){var C=r(a(c),l);d(c,C),u&&T.append(u),m.remove(),f=!0}}}else{var C=r(p.slice(0,h+1).join(s),l);f=!0,d(c,C)}return f}function o(t,e){return t.innerHeight()>e.maxHeight}function r(t,e){for(;$.inArray(t.slice(-1),e.lastCharacter.remove)>-1;)t=t.slice(0,-1);return $.inArray(t.slice(-1),e.lastCharacter.noEllipsis)<0&&(t+=e.ellipsis),t}function i(t){return{width:t.innerWidth(),height:t.innerHeight()}}function d(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function a(t){return t.innerText?t.innerText:t.nodeValue?t.nodeValue:t.textContent?t.textContent:""}function l(t,e){return"undefined"==typeof t?!1:t?"string"==typeof t?(t=$(t,e),t.length?t:!1):"object"==typeof t?"undefined"==typeof t.jquery?!1:t:!1:!1}function u(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],o=0,r=n.length;r>o;o++){var i=parseInt(t.css(n[o]),10);isNaN(i)&&(i=0),e-=i}return e}function f(t,e){return t?(e="string"==typeof e?"dotdotdot: "+e:["dotdotdot:",e],"undefined"!=typeof window.console&&"undefined"!=typeof window.console.log&&window.console.log(e),!1):!1}if(!$.fn.dotdotdot){$.fn.dotdotdot=function(n){if(0==this.length)return n&&n.debug===!1||f(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){$(this).dotdotdot(n)});var r=this;r.data("dotdotdot")&&r.trigger("destroy.dot"),r.data("dotdotdot-style",r.attr("style")),r.css("word-wrap","break-word"),r.bind_events=function(){return r.bind("update.dot",function(n,i){n.preventDefault(),n.stopPropagation(),a.maxHeight="number"==typeof a.height?a.height:u(r),a.maxHeight+=a.tolerance,"undefined"!=typeof i&&(("string"==typeof i||i instanceof HTMLElement)&&(i=$("<div />").append(i).contents()),i instanceof $&&(d=i)),g=r.wrapInner('<div class="dotdotdot" />').children(),g.empty().append(d.clone(!0)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var l=!1,f=!1;return s.afterElement&&(l=s.afterElement.clone(!0),s.afterElement.remove()),o(g,a)&&(f="children"==a.wrap?t(g,a,l):e(g,r,g,a,l)),g.replaceWith(g.contents()),g=null,$.isFunction(a.callback)&&a.callback.call(r[0],f,d),s.isTruncated=f,f}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(r[0],s.isTruncated),s.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(r[0],d),d}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),r.unwatch().unbind_events().empty().append(d).attr("style",r.data("dotdotdot-style")).data("dotdotdot",!1)}),r},r.unbind_events=function(){return r.unbind(".dot"),r},r.watch=function(){if(r.unwatch(),"window"==a.watch){var t=$(window),e=t.width(),n=t.height();t.bind("resize.dot"+s.dotId,function(){e==t.width()&&n==t.height()&&a.windowResizeFix||(e=t.width(),n=t.height(),h&&clearInterval(h),h=setTimeout(function(){r.trigger("update.dot")},10))})}else p=i(r),h=setInterval(function(){var t=i(r);(p.width!=t.width||p.height!=t.height)&&(r.trigger("update.dot"),p=i(r))},100);return r},r.unwatch=function(){return $(window).unbind("resize.dot"+s.dotId),h&&clearInterval(h),r};var d=r.contents(),a=$.extend(!0,{},$.fn.dotdotdot.defaults,n),s={},p={},h=null,g=null;return s.afterElement=l(a.after,r),s.isTruncated=!1,s.dotId=c++,r.data("dotdotdot",!0).bind_events().trigger("update.dot"),a.watch&&r.watch(),r},$.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,debug:!1};var c=1,s=$.fn.html;$.fn.html=function(t){return"undefined"!=typeof t?this.data("dotdotdot")&&"function"!=typeof t?this.trigger("update",[t]):s.call(this,t):s.call(this)};var p=$.fn.text;$.fn.text=function(t){if("undefined"!=typeof t){if(this.data("dotdotdot")){var e=$("<div />");return e.text(t),t=e.html(),e.remove(),this.trigger("update",[t])}return p.call(this,t)}return p.call(this)}}}(jQuery);